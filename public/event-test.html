<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Display Test</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        h1 { color: #6F714B; }
        .event { border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; border-radius: 8px; }
        .event h2 { margin-top: 0; }
        .category { display: inline-block; padding: 3px 8px; background-color: #6F714B; color: white; border-radius: 4px; font-size: 12px; }
        button { background: #6F714B; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; margin: 5px; }
        button:hover { background: #555D35; }
        .container { margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>Event Visibility Test</h1>
    
    <div class="container">
        <button onclick="fetchPublishedEvents()">Show Published Events</button>
        <button onclick="fetchDraftEvents()">Show Draft Events</button>
        <button onclick="fetchEventById()">Fetch Web Catalyst by ID</button>
    </div>

    <div id="events-container"></div>

    <script>
        // Fetch published events
        function fetchPublishedEvents() {
            fetch('http://localhost:5000/api/events?status=published')
                .then(response => response.json())
                .then(data => {
                    console.log('Published events:', data);
                    displayEvents(data.data.events);
                })
                .catch(error => console.error('Error fetching published events:', error));
        }

        // Fetch draft events
        function fetchDraftEvents() {
            fetch('http://localhost:5000/api/events?status=draft')
                .then(response => response.json())
                .then(data => {
                    console.log('Draft events:', data);
                    displayEvents(data.data.events);
                })
                .catch(error => console.error('Error fetching draft events:', error));
        }

        // Fetch Web Catalyst by ID
        function fetchEventById() {
            fetch('http://localhost:5000/api/events/68be33468c6dc9f72ac42a3d')
                .then(response => response.json())
                .then(data => {
                    console.log('Web catalyst event:', data);
                    displayEvents([data.data]);
                })
                .catch(error => console.error('Error fetching Web Catalyst event:', error));
        }

        // Display events
        function displayEvents(events) {
            const container = document.getElementById('events-container');
            container.innerHTML = '';
            
            if (!events || events.length === 0) {
                container.innerHTML = '<p>No events found</p>';
                return;
            }

            events.forEach(event => {
                const eventEl = document.createElement('div');
                eventEl.className = 'event';
                
                const date = new Date(event.date).toLocaleDateString();
                
                eventEl.innerHTML = `
                    <h2>${event.title}</h2>
                    <p><span class="category">${event.category}</span> <small>(${event.status})</small></p>
                    <p><strong>Date:</strong> ${date}</p>
                    <p><strong>Description:</strong> ${event.description.substring(0, 150)}...</p>
                `;
                
                container.appendChild(eventEl);
            });
        }
    </script>
</body>
</html>
